import{o as i,b as _,w as e,c as t,u as a,D as m,f as p,K as x,L as l,t as u,I as h,G as d,l as y,E as S,F as w,k as c,_ as T,$ as C,v as M,n as L,a as j,j as D,z as P}from"./index-7e5a38e4.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";const B={class:"d-flex align-start mb-3"},F={class:"text-h1 font-weight-medium"},I=a("span",{class:"text-subtitle-1 text-medium-emphasis text-white"},"消息总数",-1),N={name:"TotalMessage",props:["stat"],data:()=>({stat:{message_count:0}}),mounted(){}},R=Object.assign(N,{setup(s){return(o,n)=>(i(),_(d,{elevation:"0",class:"bg-secondary overflow-hidden bubble-shape bubble-secondary-shape"},{default:e(()=>[t(h,null,{default:e(()=>[a("div",B,[t(m,{icon:"",rounded:"sm",color:"darksecondary",variant:"flat"},{default:e(()=>[t(p,{icon:"mdi-account-multiple-outline"})]),_:1})]),t(x,null,{default:e(()=>[t(l,{cols:"6"},{default:e(()=>[a("h2",F,u(s.stat.message_count),1),I]),_:1})]),_:1})]),_:1})]),_:1}))}}),z={class:"d-flex align-start mb-3"},E={class:"text-h1 font-weight-medium"},H=a("span",{class:"text-subtitle-1 text-medium-emphasis text-white"},"消息平台数",-1),G={name:"TotalSession",props:["stat"],data:()=>({stat:{platform_count:0}})},K=Object.assign(G,{setup(s){return(o,n)=>(i(),_(d,{elevation:"0",class:"bg-primary overflow-hidden bubble-shape bubble-primary-shape"},{default:e(()=>[t(h,null,{default:e(()=>[a("div",z,[t(m,{icon:"",rounded:"sm",color:"darkprimary",variant:"flat"},{default:e(()=>[t(p,{icon:"mdi-account-multiple-outline"})]),_:1})]),t(x,null,{default:e(()=>[t(l,{cols:"6"},{default:e(()=>[a("h2",E,u(s.stat.platform_count),1),H]),_:1})]),_:1})]),_:1})]),_:1}))}}),U={name:"OnlineTime",components:{},props:["stat"],watch:{},data:()=>({stat:{memory:"Loading",running:"Loading"}}),mounted(){}},q={class:"d-flex align-center gap-3"},A={class:"text-h4 font-weight-medium"},J=a("span",{class:"text-subtitle-2 text-medium-emphasis text-white"},"运行时间",-1),Q={class:"d-flex align-center gap-3"},W={class:"text-h4 font-weight-medium"},X=a("span",{class:"text-subtitle-2 text-disabled font-weight-medium"},"占用内存",-1);function Y(s,o,n,f,r,v){return i(),y(w,null,[t(d,{elevation:"0",class:"bg-primary overflow-hidden bubble-shape-sm bubble-primary mb-6"},{default:e(()=>[t(h,{class:"pa-5"},{default:e(()=>[a("div",q,[t(m,{color:"darkprimary",icon:"",rounded:"sm",variant:"flat"},{default:e(()=>[t(p,{icon:"mdi-clock"})]),_:1}),a("div",null,[a("h4",A,u(n.stat.running),1),J]),t(S),a("div",null,[t(m,{icon:"",rounded:"sm",variant:"plain"},{default:e(()=>[t(p,{color:"black",icon:"mdi-stop",size:"32"})]),_:1})])])]),_:1})]),_:1}),t(d,{elevation:"0",class:"bubble-shape-sm overflow-hidden bubble-warning"},{default:e(()=>[t(h,{class:"pa-5"},{default:e(()=>{var b,g;return[a("div",Q,[t(m,{color:"lightwarning",icon:"",rounded:"sm",variant:"flat"},{default:e(()=>[t(p,{icon:"mdi-memory"})]),_:1}),a("div",null,[a("h4",W,u((b=n.stat.memory)==null?void 0:b.process)+" / "+u((g=n.stat.memory)==null?void 0:g.system)+" MiB",1),X])])]}),_:1})]),_:1})],64)}const Z=$(U,[["render",Y]]),tt=a("span",{class:"text-subtitle-2 text-disabled font-weight-bold"},"总消息趋势",-1),et={class:"mt-4"},at={name:"MessageStat",components:{},props:["stat"],data:()=>({total_cnt:0,select:{state:"Today",abbr:"FL"},items:[{state:"过去 1 天",abbr:"FL"}],chartOptions1:{chart:{type:"area",height:400,fontFamily:"inherit",foreColor:"#a1aab2"},colors:["#5e35b1"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:1},tooltip:{fixed:{enabled:!1},x:{show:!0,format:"yyyy-MM-dd HH:mm"},y:{title:{formatter:()=>"消息条数 "}}},xaxis:{type:"datetime",title:{text:"时间"}},yaxis:{title:{text:"消息条数"}},grid:{show:!0}},lineChart1:{series:[{name:"消息条数",data:[]}]}}),watch:{stat:{handler:function(s,o){s=s.message_time_series,this.lineChart1.series[0].data=s.map(n=>[new Date(n[0]*1e3).getTime(),n[1]])},deep:!0}}},st=Object.assign(at,{setup(s){return(o,n)=>{const f=c("apexchart");return i(),_(d,{elevation:"0"},{default:e(()=>[t(d,{variant:"outlined"},{default:e(()=>[t(h,null,{default:e(()=>[t(x,null,{default:e(()=>[t(l,{cols:"12",sm:"7"},{default:e(()=>[tt]),_:1}),t(l,{cols:"12",sm:"5"},{default:e(()=>[t(T,{color:"primary",variant:"outlined","hide-details":"",modelValue:o.select,"onUpdate:modelValue":n[0]||(n[0]=r=>o.select=r),items:o.items,"item-title":"state","item-value":"abbr",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1}),a("div",et,[t(f,{type:"area",height:"280",options:o.chartOptions1,series:o.lineChart1.series,ref:"rtchart"},null,8,["options","series"])])]),_:1})]),_:1})]),_:1})}}}),ot=a("div",{class:"d-flex align-center"},[a("h4",{class:"text-h4 mt-1"},"各平台消息数")],-1),nt={class:"mt-4"},lt={class:"d-inline-flex align-center justify-space-between w-100"},it={class:"text-subtitle-1 text-medium-emphasis font-weight-bold"},dt={class:"ml-auto text-subtitle-1 text-medium-emphasis font-weight-bold"},rt={class:"text-center mt-3"},ct={name:"PlatformStat",components:{},props:["stat"],watch:{stat:{handler:function(s,o){this.platforms=s.platform},deep:!0}},data:()=>({platforms:[]}),mounted(){}},ut=Object.assign(ct,{setup(s){return C(()=>({chart:{type:"area",height:95,fontFamily:"inherit",foreColor:"#a1aab2",sparkline:{enabled:!0}},colors:["#5e35b1"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:1},tooltip:{theme:"dark",fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:()=>"消息条数 "}},marker:{show:!1}}})),(o,n)=>{const f=c("ChevronRightIcon");return i(),_(d,{elevation:"0"},{default:e(()=>[t(d,{variant:"outlined"},{default:e(()=>[t(h,null,{default:e(()=>[ot,a("div",nt,[t(M,{lines:"two",class:"py-0",style:{height:"270px"}},{default:e(()=>[(i(!0),y(w,null,L(o.platforms,(r,v)=>(i(),_(D,{key:v,value:r,color:"secondary",rounded:"sm"},{default:e(()=>[a("div",lt,[a("div",null,[a("h6",it,u(r.name),1)]),a("div",dt,u(r.count)+" 条",1)])]),_:2},1032,["value"]))),128))]),_:1}),a("div",rt,[t(m,{color:"primary",variant:"text"},{append:e(()=>[t(f,{"stroke-width":"1.5",width:"20"})]),default:e(()=>[j("详情 ")]),_:1})])])]),_:1})]),_:1})]),_:1})}}}),mt={name:"DefaultDashboard",components:{TotalMessage:R,OnlinePlatform:K,OnlineTime:Z,MessageStat:st,PlatformStat:ut},data:()=>({stat:{}}),mounted(){P.get("/api/stat/get").then(s=>{this.stat=s.data.data})}};function _t(s,o,n,f,r,v){const b=c("TotalMessage"),g=c("OnlinePlatform"),V=c("OnlineTime"),k=c("MessageStat"),O=c("PlatformStat");return i(),_(x,null,{default:e(()=>[t(l,{cols:"12",md:"4"},{default:e(()=>[t(b,{stat:s.stat},null,8,["stat"])]),_:1}),t(l,{cols:"12",md:"4"},{default:e(()=>[t(g,{stat:s.stat},null,8,["stat"])]),_:1}),t(l,{cols:"12",md:"4"},{default:e(()=>[t(V,{stat:s.stat},null,8,["stat"])]),_:1}),t(l,{cols:"12",lg:"8"},{default:e(()=>[t(k,{stat:s.stat},null,8,["stat"])]),_:1}),t(l,{cols:"12",lg:"4"},{default:e(()=>[t(O,{stat:s.stat},null,8,["stat"])]),_:1})]),_:1})}const pt=$(mt,[["render",_t]]);export{pt as default};
