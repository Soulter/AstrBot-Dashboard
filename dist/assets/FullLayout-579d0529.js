import{c as e,a as m,m as x,o as n,b as u,w as t,t as g,V as oe,d as ne,e as H,f as y,g as B,h as W,i as J,j as K,r as R,k as Q,l as z,F as S,n as X,p as ie,q as $,s as re,u as h,v as ue,x as i,y as de,z as C,A as Y,B as b,C as E,D as _,E as N,G as U,H as P,I as j,J as T,K as ce,L as me,M as I,N as w,O,P as q,Q as pe,R as ve,S as fe,T as he,U as _e,W as Ve,X as be,Y as ge,Z as we}from"./index-7e5a38e4.js";import{_ as ke,u as L,m as F}from"./md5-6c2e1fd5.js";var G={name:"Menu2Icon",props:{size:{type:[Number,String],default:24}},render(){const a=this.$props.size+"px",s=this.$data.attrs||{},r={width:s.width||a,height:s.height||a};return e("svg",x({xmlns:"http://www.w3.org/2000/svg",class:"icon-tabler icon-tabler-menu-2",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r),[m("   "),e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null),m("   "),e("path",{d:"M4 6l16 0"},null),m("   "),e("path",{d:"M4 12l16 0"},null),m("   "),e("path",{d:"M4 18l16 0"},null),m(" ")])}};const ye=[{title:"面板",icon:"mdi-view-dashboard",to:"/dashboard/default"},{title:"配置",icon:"mdi-cog",to:"/config"},{title:"插件",icon:"mdi-puzzle",to:"/extension"},{title:"控制台",icon:"mdi-console",to:"/console"}],Z={__name:"NavGroup",props:{item:Object},setup(a){const s=a;return(r,f)=>(n(),u(oe,{color:"darkText",class:"smallCap"},{default:t(()=>[m(g(s.item.header),1)]),_:1}))}},M={__name:"NavItem",props:{item:Object,level:Number},setup(a){return(s,r)=>(n(),u(K,{to:a.item.type==="external"?"":a.item.to,href:a.item.type==="external"?a.item.to:"",rounded:"",class:"mb-1",color:"secondary",disabled:a.item.disabled,target:a.item.type==="external"?"_blank":""},ne({prepend:t(()=>[a.item.icon?(n(),u(y,{key:0,color:a.item.iconColor,size:a.item.iconSize,class:"hide-menu",icon:a.item.icon},null,8,["color","size","icon"])):B("",!0)]),default:t(()=>[e(W,null,{default:t(()=>[m(g(a.item.title),1)]),_:1}),a.item.subCaption?(n(),u(J,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[m(g(a.item.subCaption),1)]),_:1})):B("",!0)]),_:2},[a.item.chip?{name:"append",fn:t(()=>[e(H,{color:a.item.chipColor,class:"sidebarchip hide-menu",size:a.item.chipIcon?"small":"default",variant:a.item.chipVariant,"prepend-icon":a.item.chipIcon},{default:t(()=>[m(g(a.item.chip),1)]),_:1},8,["color","size","variant","prepend-icon"])]),key:"0"}:void 0]),1032,["to","href","disabled","target"]))}},Ce={__name:"IconSet",props:{item:Object,level:Number},setup(a){const s=a;return(r,f)=>s.level>0?(n(),u(R(s.item),{key:0,size:"5",fill:"currentColor","stroke-width":"1.5",class:"iconClass"})):(n(),u(R(s.item),{key:1,size:"20","stroke-width":"1.5",class:"iconClass"}))}},ee={__name:"NavCollapse",props:{item:Object,level:Number},setup(a){const s=a;return(r,f)=>{const v=Q("NavCollapse",!0);return n(),u(ie,{"no-action":""},{activator:t(({props:d})=>[e(K,x(d,{value:a.item.title,rounded:"",class:"mb-1",color:"secondary"}),{prepend:t(()=>[e(Ce,{item:a.item.icon,level:a.level},null,8,["item","level"])]),default:t(()=>[e(W,{class:"mr-auto"},{default:t(()=>[m(g(a.item.title),1)]),_:1}),a.item.subCaption?(n(),u(J,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[m(g(a.item.subCaption),1)]),_:1})):B("",!0)]),_:2},1040,["value"])]),default:t(()=>[(n(!0),z(S,null,X(a.item.children,(d,p)=>(n(),z(S,{key:p},[d.children?(n(),u(v,{key:0,item:d,level:s.level+1},null,8,["item","level"])):(n(),u(M,{key:1,item:d,level:s.level+1},null,8,["item","level"]))],64))),128))]),_:1})}}},te={__name:"LogoMain",setup(a){return(s,r)=>(n(),u(ke))}},xe={class:"pa-5"},ze={class:"pa-4 text-center"},Se={name:"VerticalSidebar",components:{NavGroup:Z,NavItem:M,NavCollapse:ee,Logo:te},data:()=>({version:"-"}),mounted(){this.get_version()},methods:{get_version(){C.get("/api/stat/version").then(a=>{this.version=a.data.data.version}).catch(a=>{console.log(a)})}}},Ne=$({...Se,setup(a){const s=L(),r=re(ye);return(f,v)=>{const d=Q("perfect-scrollbar");return n(),u(de,{left:"",modelValue:i(s).Sidebar_drawer,"onUpdate:modelValue":v[0]||(v[0]=p=>i(s).Sidebar_drawer=p),elevation:"0","rail-width":"105","mobile-breakpoint":"960",app:"",class:"leftSidebar",rail:i(s).mini_sidebar,"expand-on-hover":""},{default:t(()=>[h("div",xe,[e(te)]),e(d,{class:"scrollnavbar"},{default:t(()=>[e(ue,{class:"pa-4"},{default:t(()=>[(n(!0),z(S,null,X(r.value,(p,V)=>(n(),z(S,{key:V},[p.header?(n(),u(Z,{item:p,key:p.title},null,8,["item"])):p.divider?(n(),u(Y,{key:1,class:"my-3"})):p.children?(n(),u(ee,{key:2,class:"leftPadding",item:p,level:0},null,8,["item"])):(n(),u(M,{key:3,item:p,class:"leftPadding"},null,8,["item"]))],64))),128))]),_:1}),h("div",ze,[e(H,{color:"inputBorder",size:"small"},{default:t(()=>[m(" v"+g(f.version),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","rail"])}}}),Ie=h("span",{class:"text-h5"},"密码修改",-1),Be=h("small",null,"如果是第一次修改密码，原密码请留空。",-1),Te=h("br",null,null,-1),$e=h("span",{class:"text-h5"},"更新项目",-1),Le={style:{"margin-top":"16px"}},Me=h("p",null,"切换到指定版本",-1),De=$({__name:"VerticalHeader",setup(a){const s=L();b(!1);let r=b(!1),f=b(!1),v=b(""),d=b(""),p=b(""),V=b(""),D=b(!1),k=b("");const ae=c=>{window.open(c,"_blank")};function le(){v.value!=""&&(v.value=F.md5(v.value)),d.value=F.md5(d.value),C.post("/api/auth/password/reset",{password:v.value,new_password:d.value}).then(c=>{if(c.data.status=="error"){p.value=c.data.message,v.value="",d.value="";return}r.value=!r.value,p.value=c.data.message,setTimeout(()=>{he().logout()},1e3)}).catch(c=>{console.log(c),p.value=c,v.value="",d.value=""})}function se(){V.value="正在检查更新...",C.get("/api/update/check").then(c=>{D.value=c.data.data.has_new_version,V.value=c.data.message}).catch(c=>{console.log(c),V.value=c})}function A(c){V.value="正在切换版本...",C.post("/api/update/do",{version:c}).then(l=>{V.value=l.data.message,l.data.status=="success"&&setTimeout(()=>{window.location.reload()},1e3)}).catch(l=>{console.log(l),V.value=l})}return(c,l)=>(n(),u(fe,{elevation:"0",height:"80"},{default:t(()=>[e(_,{class:"hidden-md-and-down text-secondary",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:l[0]||(l[0]=E(o=>i(s).SET_MINI_SIDEBAR(!i(s).mini_sidebar),["stop"])),size:"small"},{default:t(()=>[e(i(G),{size:"20","stroke-width":"1.5"})]),_:1}),e(_,{class:"hidden-lg-and-up text-secondary ms-3",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:E(i(s).SET_SIDEBAR_DRAWER,["stop"]),size:"small"},{default:t(()=>[e(i(G),{size:"20","stroke-width":"1.5"})]),_:1},8,["onClick"]),e(N),e(q,{modelValue:i(r),"onUpdate:modelValue":l[4]||(l[4]=o=>w(r)?r.value=o:r=o),persistent:"",width:"700"},{activator:t(({props:o})=>[e(_,x({class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},o),{default:t(()=>[e(y,{icon:"mdi-account-edit",size:"25"})]),_:2},1040)]),default:t(()=>[e(U,null,{default:t(()=>[e(P,null,{default:t(()=>[Ie]),_:1}),e(j,null,{default:t(()=>[e(T,null,{default:t(()=>[e(ce,null,{default:t(()=>[e(me,{cols:"12"},{default:t(()=>[e(I,{label:"原密码*",type:"password",modelValue:i(v),"onUpdate:modelValue":l[1]||(l[1]=o=>w(v)?v.value=o:v=o),required:""},null,8,["modelValue"]),e(I,{label:"新密码*",type:"password",modelValue:i(d),"onUpdate:modelValue":l[2]||(l[2]=o=>w(d)?d.value=o:d=o),required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Be,Te,h("small",null,g(i(p)),1)]),_:1}),e(O,null,{default:t(()=>[e(N),e(_,{color:"blue-darken-1",variant:"text",onClick:l[3]||(l[3]=o=>w(r)?r.value=!1:r=!1)},{default:t(()=>[m(" 关闭 ")]),_:1}),e(_,{color:"blue-darken-1",variant:"text",onClick:le},{default:t(()=>[m(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:i(f),"onUpdate:modelValue":l[9]||(l[9]=o=>w(f)?f.value=o:f=o),width:"700"},{activator:t(({props:o})=>[e(_,x({onClick:se,class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},o),{default:t(()=>[e(y,{icon:"mdi-update",size:"25"})]),_:2},1040)]),default:t(()=>[e(U,null,{default:t(()=>[e(P,null,{default:t(()=>[$e]),_:1}),e(j,null,{default:t(()=>[e(T,null,{default:t(()=>[h("p",null,g(i(V)),1),pe(e(_,{onClick:l[5]||(l[5]=o=>A("latest")),color:"primary",class:"ml-2",style:{"border-radius":"10px"}},{default:t(()=>[m(" 更新到最新版本 ")]),_:1},512),[[ve,i(D)]]),e(Y),h("div",Le,[Me,e(I,{label:"版本号。如v3.1.3",modelValue:i(k),"onUpdate:modelValue":l[6]||(l[6]=o=>w(k)?k.value=o:k=o),required:""},null,8,["modelValue"]),e(_,{color:"primary",class:"ml-2",style:{"border-radius":"10px"},onClick:l[7]||(l[7]=o=>A(i(k)))},{default:t(()=>[m(" 切换到指定版本 ")]),_:1})])]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(N),e(_,{color:"blue-darken-1",variant:"text",onClick:l[8]||(l[8]=o=>w(f)?f.value=!1:f=!1)},{default:t(()=>[m(" 关闭 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(_,{class:"profileBtn text-primary",color:"lightprimary",variant:"flat",onClick:l[10]||(l[10]=o=>ae("https://github.com/Soulter/AstrBot")),rounded:"pill"},{default:t(()=>[e(y,{icon:"mdi-github",size:"25"})]),_:1})]),_:1}))}}),Ee=$({__name:"FullLayout",setup(a){const s=L();return(r,f)=>(n(),u(ge,null,{default:t(()=>[e(be,{theme:"PurpleTheme",class:Ve([i(s).fontTheme,i(s).mini_sidebar?"mini-sidebar":"",i(s).inputBg?"inputWithbg":""])},{default:t(()=>[e(Ne),e(De),e(_e,null,{default:t(()=>[e(T,{fluid:"",class:"page-wrapper"},{default:t(()=>[h("div",null,[e(i(we))])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}))}});export{Ee as default};
